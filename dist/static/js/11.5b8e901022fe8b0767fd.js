webpackJsonp([11],{G74H:function(a,t,s){"use strict";var e=s("mvHQ"),i=s.n(e),o=s("Dd8w"),r=s.n(o),n=s("IXCS"),l=s.n(n),c=s("NHnr"),d=s("PJh5"),m=l.a.Validator.create({templates:{required:"Campo obrigatório",email:"Formato de e-mail inválido",length:"Tamanho do campo inválido"}});t.a={name:"Dados",data:function(){return{isImageModalActive:!1,perfilAPI:"",situacaoAPI:"",tabProfissional:{isLoading:!1,data:[],columns:[{field:"nome",label:"Nome"},{field:"cpf",label:"CPF"}],selected:null},form:{id:"",nome:"",email:"",dt_nascimento:"",cpf:"",rg:"",faculdade:"",no_conselho:"",perfis:"",situacoes:"",t_celular:"",t_fixo:"",cep:"",rua:"",numero:"",complemento:"",cidade:"",estado:""},bNovo:!0,bAtualizar:!0,bSenha:!0}},validators:{"form.nome":function(a){return m.value(a).required()},"form.email":function(a){return m.value(a).email().required()},"form.dt_nascimento":function(a){return m.value(a).required()},"form.rg":function(a){return m.value(a).length(10)},"form.cpf":function(a){return m.value(a).required().length(11)},"form.perfis":function(a){return m.value(a).required()},"form.situacoes":function(a){return m.value(a).required()},"form.rua":function(a){return m.value(a).required()},"form.numero":function(a){return m.value(a).required()},"form.cidade":function(a){return m.value(a).required()},"form.estado":function(a){return m.value(a).required()}},created:function(){this.perfilProfissional(),this.situacaoProfissional()},methods:{copiaProfissional:function(){var a=this;console.log("Copia Profissional"),this.tabProfissional.selected.nome&&(this.$http.get("https://sistema-darmas.com.br/api/v1/profissional/nome-completo/"+this.tabProfissional.selected.nome).then(function(t){var s=t.data,e=d.utc(s.dt_nascimento).format("DD/MM/YYYY");s.dt_nascimento=e,a.form=s,a.bNovo=!0,a.bSenha=!1,a.bAtualizar=!1,c.eBus.$emit("PROFISSIONAL_ID",a.form.id)}).catch(function(t){a.$toast.open({message:"NENHUM PROFISSIONAL encontrado.",type:"is-danger",position:"is-bottom"})}).finally(function(){a.tabProfissional.isLoading=!1}),this.isImageModalActive=!1)},perfilProfissional:function(){var a=this;this.$http.get("https://sistema-darmas.com.br/api/v1/profissional/perfil").then(function(t){a.perfilAPI=t.data})},situacaoProfissional:function(){var a=this;this.$http.get("https://sistema-darmas.com.br/api/v1/profissional/situacao").then(function(t){a.situacaoAPI=t.data})},pesquisarNome:function(){var a=this;console.log("Pesquisar profissional"),this.form.nome.length&&(this.tabProfissional.isLoading=!0,this.$http.get("https://sistema-darmas.com.br/api/v1/profissional/nome/"+this.form.nome).then(function(t){a.tabProfissional.data=t.data,a.isImageModalActive=!0}).catch(function(t){a.$toast.open({message:"NENHUM PROFISSIONAL encontrado com esse nome.",type:"is-danger",position:"is-bottom"})}).finally(function(){a.tabProfissional.isLoading=!1}))},pesquisarCPF:function(){var a=this;console.log("Pesquisar CPF"),this.form.cpf.length&&this.$http.get("https://sistema-darmas.com.br/api/v1/profissional/cpf/"+this.form.cpf).then(function(t){var s=t.data,e=d.utc(s.dt_nascimento).format("DD/MM/YYYY");s.dt_nascimento=e,a.form=s,a.bAtualizar=!1,a.bSenha=!1,a.bNovo=!0}).catch(function(t){a.$toast.open({duration:5e3,message:"PACIENTE não encontrado",type:"is-warning",position:"is-bottom"}),a.bNovo=!1,a.bSenha=!1,a.bAtualizar=!0})},novoProfissional:function(){var a=this;console.log("Novo Profissional");var t={};this.$validate().then(function(s){if(s){t=r()({},a.form),delete t.id;var e=d.utc(a.form.dt_nascimento,"DD/MM/YYYY");t.dt_nascimento=e,a.$http.post("https://sistema-darmas.com.br/api/v1/profissional",t).then(function(t){a.$toast.open({message:"SUCESSO! PACIENTE gravado.",type:"is-success",position:"is-bottom"})}).catch(function(t){a.$toast.open({message:"FALHA ao inserir novo PACIENTE!",type:"is-danger",position:"is-bottom"})})}else a.$toast.open({message:"FORMULÁRIO INCOMPLETO",type:"is-danger",position:"is-bottom"})})},reset:function(){this.form.nome="",this.form.email="",this.form.dt_nascimento="",this.form.cpf="",this.form.rg="",this.form.faculdade="",this.form.no_conselho="",this.form.perfis="",this.form.situacoes="",this.form.t_celular="",this.form.t_fixo="",this.form.cep="",this.form.rua="",this.form.numero="",this.form.complemento="",this.form.cidade="",this.form.estado="",this.data=[],this.bNovo=!0,this.bSenha=!0,this.bAtualizar=!0,this.validation.reset()},pesquisarCEP:function(){var a=this;if(!this.form.cep.length)return this.data=[],void console.log("Nada enviado...");var t=this.form.cep;t=t.replace(".",""),t=t.replace("-",""),this.$http.defaults.headers.common={},this.$http.get("https://viacep.com.br/ws/"+t+"/json").then(function(t){t.data&&(a.form.rua=t.data.logradouro,a.form.cidade=t.data.localidade,a.form.estado=t.data.uf)}).catch(function(t){a.erroCep()}).finally(function(){a.$http.defaults.headers.common.Authorization="Bearer "+a.$session.get("jwt")})},erroCep:function(){this.$toast.open({duration:5e3,message:"CEP não encontrado",type:"is-warning",position:"is-bottom"})},atualizarProfissional:function(){var a=this;console.log("Atualizar profissional");var t=r()({},this.form);this.$validate().then(function(s){if(s){delete t.id;var e=d.utc(a.form.dt_nascimento,"DD/MM/YYYY");t.dt_nascimento=e,t.faculdade||(t.faculdade=null),t.no_conselho||(t.no_conselho=null),console.log(i()(t)),a.$http.post("https://sistema-darmas.com.br/api/v1/profissional/"+a.form.nome,t).then(function(t){a.$toast.open({message:"SUCESSO! PROFISSIONAL gravado.",type:"is-success",position:"is-bottom"})}).catch(function(t){a.$toast.open({message:"FALHA ao inserir novo PROFISSIONAL!",type:"is-danger",position:"is-bottom"})})}else a.$toast.open({message:"FORMULÁRIO INCOMPLETO",type:"is-danger",position:"is-bottom"})})},inicializaSenha:function(a){var t=this;console.log("Inicializa Senha de Profissional");var s={id_profissional:this.form.id,password:a};this.$http.post("https://sistema-darmas.com.br/api/v1/profissional/reset-senha",s).then(function(a){t.$toast.open({message:"SUCESSO! SENHA INICIALIZADA.",type:"is-success",position:"is-bottom"})}).catch(function(a){t.$toast.open({message:"FALHA ao INICIALIZAR senha!",type:"is-danger",position:"is-bottom"})})}}}},fn5m:function(a,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=s("G74H"),i=s("nDxL"),o=s("VU/8"),r=o(e.a,i.a,!1,null,null,null);t.default=r.exports},mvHQ:function(a,t,s){a.exports={default:s("qkKv"),__esModule:!0}},nDxL:function(a,t,s){"use strict";var e=function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",[s("form",[s("div",{staticClass:"field is-horizontal"},[a._m(0),a._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("div",{staticClass:"field has-addons"},[s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.nome,expression:"form.nome"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.nome")},attrs:{type:"text",placeholder:"Nome"},domProps:{value:a.form.nome},on:{input:function(t){t.target.composing||a.$set(a.form,"nome",t.target.value)}}})]),a._v(" "),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-right",on:{click:function(t){return t.preventDefault(),a.pesquisarNome(t)}}},[s("i",{staticClass:"fas fa-search"})])])]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.nome"),expression:"validation.hasError('form.nome')"}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.nome")))])]),a._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.email,expression:"form.email"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.email")},attrs:{type:"text",placeholder:"Email"},domProps:{value:a.form.email},on:{input:function(t){t.target.composing||a.$set(a.form,"email",t.target.value)}}})]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.email"),expression:"validation.hasError('form.email')"}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.email")))])])])]),a._v(" "),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"}),a._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.dt_nascimento,expression:"form.dt_nascimento"},{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.dt_nascimento")},attrs:{type:"text",placeholder:"Data de Nascimento"},domProps:{value:a.form.dt_nascimento},on:{input:function(t){t.target.composing||a.$set(a.form,"dt_nascimento",t.target.value)}}})]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.dt_nascimento"),expression:"validation.hasError('form.dt_nascimento')"}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.dt_nascimento")))])]),a._v(" "),s("div",{staticClass:"field"},[s("div",{staticClass:"field has-addons"},[s("p",{staticClass:"control is-expanded has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.cpf,expression:"form.cpf"},{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.cpf")},attrs:{type:"text",placeholder:"CPF"},domProps:{value:a.form.cpf},on:{input:function(t){t.target.composing||a.$set(a.form,"cpf",t.target.value)}}})]),a._v(" "),s("div",{staticClass:"control"},[s("a",{staticClass:"button  is-right",on:{click:function(t){return t.preventDefault(),a.pesquisarCPF(t)}}},[s("i",{staticClass:"fas fa-search"})])])]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.cpf"),expression:"validation.hasError('form.cpf')"}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.cpf")))])]),a._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.rg,expression:"form.rg"},{name:"mask",rawName:"v-mask",value:"##########",expression:"'##########'"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.rg")},attrs:{type:"text",placeholder:"Identidade"},domProps:{value:a.form.rg},on:{input:function(t){t.target.composing||a.$set(a.form,"rg",t.target.value)}}})]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.rg"),expression:"validation.hasError('form.rg')"}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.rg")))])])])]),a._v(" "),s("div",{staticClass:"field is-horizontal"},[a._m(1),a._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.faculdade,expression:"form.faculdade"}],staticClass:"input",attrs:{type:"text",placeholder:"Faculdade"},domProps:{value:a.form.faculdade},on:{input:function(t){t.target.composing||a.$set(a.form,"faculdade",t.target.value)}}})])]),a._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.no_conselho,expression:"form.no_conselho"}],staticClass:"input",attrs:{type:"text",placeholder:"Numero Conselho"},domProps:{value:a.form.no_conselho},on:{input:function(t){t.target.composing||a.$set(a.form,"no_conselho",t.target.value)}}})])])])]),a._v(" "),s("div",{staticClass:"field is-horizontal"},[a._m(2),a._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("b-select",{attrs:{placeholder:"Perfil",expanded:""},model:{value:a.form.perfis,callback:function(t){a.$set(a.form,"perfis",t)},expression:"form.perfis"}},a._l(a.perfilAPI,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[a._v("\n              "+a._s(t.descricao)+"\n            ")])}),0),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.perfis"),expression:"validation.hasError('form.perfis')"}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.perfis")))])],1),a._v(" "),s("div",{staticClass:"field"},[s("b-select",{attrs:{placeholder:"Situação",expanded:""},model:{value:a.form.situacoes,callback:function(t){a.$set(a.form,"situacoes",t)},expression:"form.situacoes"}},a._l(a.situacaoAPI,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[a._v("\n              "+a._s(t.descricao)+"\n            ")])}),0),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.situacoes"),expression:"validation.hasError('form.situacoes')"}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.situacoes")))])],1)])]),a._v(" "),s("div",{staticClass:"field is-horizontal"},[a._m(3),a._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.t_celular,expression:"form.t_celular"},{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],staticClass:"input",attrs:{type:"text",placeholder:"Telefone Celular"},domProps:{value:a.form.t_celular},on:{input:function(t){t.target.composing||a.$set(a.form,"t_celular",t.target.value)}}})])]),a._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.t_fixo,expression:"form.t_fixo"},{name:"mask",rawName:"v-mask",value:"##########",expression:"'##########'"}],staticClass:"input",attrs:{type:"text",placeholder:"Telefone Fixo"},domProps:{value:a.form.t_fixo},on:{input:function(t){t.target.composing||a.$set(a.form,"t_fixo",t.target.value)}}})])])])]),a._v(" "),s("div",{staticClass:"field is-horizontal"},[a._m(4),a._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.rua,expression:"form.rua"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.rua")},attrs:{type:"text",placeholder:"Rua"},domProps:{value:a.form.rua},on:{input:function(t){t.target.composing||a.$set(a.form,"rua",t.target.value)}}})]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.rua"),expression:"validation.hasError('form.rua') "}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.rua")))])]),a._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.numero,expression:"form.numero"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.numero")},attrs:{type:"text",placeholder:"Numero"},domProps:{value:a.form.numero},on:{input:function(t){t.target.composing||a.$set(a.form,"numero",t.target.value)}}})]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.numero"),expression:"validation.hasError('form.numero') "}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.numero")))])]),a._v(" "),a._m(5)])]),a._v(" "),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"}),a._v(" "),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.cidade,expression:"form.cidade"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.cidade")},attrs:{type:"text",placeholder:"Cidade"},domProps:{value:a.form.cidade},on:{input:function(t){t.target.composing||a.$set(a.form,"cidade",t.target.value)}}})]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.cidade"),expression:"validation.hasError('form.cidade') "}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.cidade")))])]),a._v(" "),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.estado,expression:"form.estado"}],staticClass:"input",class:{"is-danger":a.validation.hasError("form.estado")},attrs:{type:"text",placeholder:"Estado"},domProps:{value:a.form.estado},on:{input:function(t){t.target.composing||a.$set(a.form,"estado",t.target.value)}}})]),a._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:a.validation.hasError("form.estado"),expression:"validation.hasError('form.estado') "}],staticClass:"help is-danger"},[a._v(a._s(a.validation.firstError("form.estado")))])]),a._v(" "),s("div",{staticClass:"field"},[s("div",{staticClass:"field has-addons"},[s("p",{staticClass:"control is-expanded has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.form.cep,expression:"form.cep"},{name:"mask",rawName:"v-mask",value:"########",expression:"'########'"}],staticClass:"input",attrs:{type:"text",placeholder:"CEP"},domProps:{value:a.form.cep},on:{input:function(t){t.target.composing||a.$set(a.form,"cep",t.target.value)}}})]),a._v(" "),s("div",{staticClass:"control"},[s("a",{staticClass:"button  is-right",on:{click:function(t){return t.preventDefault(),a.pesquisarCEP(t)}}},[s("i",{staticClass:"fas fa-search"})])])])])])]),a._v(" "),s("hr"),a._v(" "),s("div",{staticClass:"field is-grouped is-grouped-right"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button",attrs:{type:"reset"},on:{click:function(t){return t.preventDefault(),a.reset(t)}}},[a._v("Limpar")])]),a._v(" "),s("p",{staticClass:"control"},[s("button",{staticClass:"button",attrs:{disabled:a.bSenha},on:{click:function(t){return t.preventDefault(),a.inicializaSenha("1234")}}},[a._v("Inicializa Senha")])]),a._v(" "),s("p",{staticClass:"control"},[s("a",{staticClass:"button",attrs:{disabled:a.bNovo},on:{click:function(t){return t.preventDefault(),a.novoProfissional(t)}}},[a._v("Novo")])]),a._v(" "),s("p",{staticClass:"control"},[s("button",{staticClass:"button",attrs:{disabled:a.bAtualizar},on:{click:function(t){return t.preventDefault(),a.atualizarProfissional(t)}}},[a._v("Atualizar")])])])]),a._v(" "),s("b-modal",{attrs:{active:a.isImageModalActive},on:{"update:active":function(t){a.isImageModalActive=t}}},[s("b-table",{attrs:{data:a.tabProfissional.data,loading:a.tabProfissional.isLoading,columns:a.tabProfissional.columns,selected:a.tabProfissional.selected},on:{"update:selected":function(t){return a.$set(a.tabProfissional,"selected",t)},dblclick:a.copiaProfissional}})],1)],1)},i=[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[a._v("Identificação")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[a._v("Formação")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[a._v("Perfil")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[a._v("Telefones")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[a._v("Endereço")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-right"},[s("input",{staticClass:"input",attrs:{type:"text",placeholder:"Complemento"}})])])}],o={render:e,staticRenderFns:i};t.a=o},qkKv:function(a,t,s){var e=s("FeBl"),i=e.JSON||(e.JSON={stringify:JSON.stringify});a.exports=function(a){return i.stringify.apply(i,arguments)}}});
//# sourceMappingURL=11.5b8e901022fe8b0767fd.js.map